import { useState } from "react";
import { Link } from 'react-router-dom';
import { getRoleAuth } from "../utils/getRoleAuth";
import { getUsernameAuth } from "../utils/getUsernameAuth";
export interface SearchProps {
  search: string;
  setSearch: React.Dispatch<React.SetStateAction<string>>;
  showSearch?: boolean;
}

export const Navbar = (props: SearchProps) => {

  const [optionsMenu, setOptionsMenu] = useState(false);

  return (
        
    <div className="flex relative bg-white ">
            
        <div className='flex justify-between w-full h-24 items-center mr-4'>
           
            <svg className="h-12 ml-6" viewBox="0 0 1374 399" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M25.8417 120.066C55.6576 91.5664 74.1233 87.2524 109.036 86.0664C139.978 87.4577 154.521 91.1482 177.321 99.5664C211.213 89.644 
            227.807 86.6715 252.34 86.5664C294.177 90.0664 311.489 102.566 329.282 126.066C356.693 166.066 357.031 196.568 342.266 268.066C331.2 303.724 
            320.912 321.843 298.024 352.066C264.956 388.023 245.587 394.798 210.503 398.066C197.722 396.146 190.48 394.467 177.321 389.566C165.364 394.909 
            157.675 396.616 142.697 398.066C106.678 395.131 89.8494 385.742 62.8703 362.066C33.2935 325.299 24.6475 304.735 10.9342 268.066C-5.99521 200.21 
            -4.93425 157.066 25.8417 120.066Z" fill="black"/>
            <path d="M80.2177 20.2788C78.8329 26.9041 78.334 32.2925 79.0138 38.1578C79.9019 45.8209 86.5344 51.2316 94.1166 52.6535L114.461 56.4686C116.021 
            56.7612 117.543 57.2297 118.997 57.8651L161.731 76.5342C162.133 76.7099 162.548 76.856 162.971 76.9714L169.869 78.8521C174.26 80.0493 178.12 75.6949 
            176.405 71.4789C158.409 39.2114 136.543 8.93983 123.184 5.65697C111.675 2.8288 97.5855 3.44416 86.6502 10.3236C83.1708 12.5124 81.0587 16.2552 80.2177 
            20.2788Z" fill="black" stroke="black"/>
            <path d="M542.934 127.6H515.03V206H497.814V127.6H469.91V113.456H542.934V127.6ZM583.012 157.488C586.255 157.488 589.071 157.083 591.46 156.272C593.892 
            155.461 595.876 154.352 597.412 152.944C598.991 151.493 600.164 149.787 600.932 147.824C601.7 145.861 602.084 143.707 602.084 141.36C602.084 136.667 
            600.527 133.061 597.412 130.544C594.34 128.027 589.626 126.768 583.268 126.768H572.26V157.488H583.012ZM627.3 206H611.748C608.804 206 606.671 204.848 
            605.348 202.544L585.892 172.912C585.167 171.803 584.356 171.013 583.46 170.544C582.607 170.075 581.327 169.84 579.62 
            169.84H572.26V206H555.044V113.456H583.268C589.54 113.456 594.916 114.117 599.396 115.44C603.919 116.72 607.61 118.533 
            610.468 120.88C613.37 123.227 615.503 126.043 616.868 129.328C618.234 132.571 618.916 136.155 618.916 140.08C618.916 143.195 618.447 146.139 617.508 
            148.912C616.612 151.685 615.29 154.203 613.54 156.464C611.834 158.725 609.7 160.709 607.14 162.416C604.623 164.123 601.743 165.467 598.5 166.448C599.61 
            167.088 600.634 167.856 601.572 168.752C602.511 169.605 603.364 170.629 604.132 171.824L627.3 206ZM686.19 171.056L674.926 140.272C674.372 138.907 673.796 
            137.285 673.198 135.408C672.601 133.531 672.004 131.504 671.406 129.328C670.852 131.504 670.276 133.552 669.678 135.472C669.081 137.349 668.505 138.992 667.95 
            140.4L656.75 171.056H686.19ZM716.59 206H703.278C701.785 206 700.569 205.637 699.63 204.912C698.692 204.144 697.988 203.205 697.518 202.096L690.606 
            183.216H652.27L645.358 202.096C645.017 203.077 644.356 203.973 643.374 204.784C642.393 205.595 641.177 206 639.726 206H626.286L662.702 113.456H680.238L716.59 
            206ZM826.521 113.456V206H811.353V146.224C811.353 143.835 811.481 141.253 811.737 138.48L783.769 191.024C782.447 193.541 780.42 194.8 777.689 194.8H775.257C772.527 
            194.8 770.5 193.541 769.177 191.024L740.889 138.288C741.017 139.696 741.124 141.083 741.209 142.448C741.295 143.813 741.337 145.072 741.337 
            146.224V206H726.169V113.456H739.161C739.929 113.456 740.591 113.477 741.145 113.52C741.7 113.563 742.191 113.669 742.617 113.84C743.087 114.011 
            743.492 114.288 743.833 114.672C744.217 115.056 744.58 115.568 744.921 116.208L772.633 167.6C773.359 168.965 774.02 170.373 774.617 171.824C775.257 
            173.275 775.876 174.768 776.473 176.304C777.071 174.725 777.689 173.211 778.329 171.76C778.969 170.267 779.652 168.837 780.377 167.472L807.705 116.208C808.047 115.568 808.409 115.056 808.793 114.672C809.177 
            114.288 809.583 114.011 810.009 113.84C810.479 113.669 810.991 113.563 811.545 113.52C812.1 113.477 812.761 113.456 813.529 113.456H826.521ZM935.425 159.728C935.425 166.512 934.295 172.805 932.033 178.608C929.815 184.368 926.657 
            189.36 922.561 193.584C918.465 197.808 913.537 201.115 907.777 203.504C902.017 205.851 895.617 207.024 888.577 207.024C881.58 207.024 875.201 205.851 869.441 203.504C863.681 201.115 858.732 197.808 854.593 193.584C850.497 189.36 
            847.319 184.368 845.057 178.608C842.796 172.805 841.665 166.512 841.665 159.728C841.665 152.944 842.796 146.672 845.057 140.912C847.319 135.109 850.497 130.096 854.593 125.872C858.732 121.648 863.681 118.363 869.441 116.016C875.201 113.627 881.58 112.432 888.577 112.432C893.271 112.432 897.687 112.987 901.825 114.096C905.964 115.163 
            909.761 116.699 913.217 118.704C916.673 120.667 919.767 123.077 922.497 125.936C925.271 128.752 927.617 131.909 929.537 135.408C931.457 138.907 932.908 142.704 933.889 146.8C934.913 150.896 935.425 
            155.205 935.425 159.728ZM917.825 159.728C917.825 154.651 917.143 150.107 915.777 146.096C914.412 142.043 912.471 138.608 909.953 135.792C907.436 132.976 904.364 130.821 900.737 129.328C897.153 127.835 893.1 127.088 
            888.577 127.088C884.055 127.088 879.98 127.835 876.353 129.328C872.769 130.821 869.697 132.976 867.137 135.792C864.62 138.608 862.679 142.043 861.313 146.096C859.948 150.107 859.265 154.651 859.265 159.728C859.265 164.805 859.948 169.371 861.313 173.424C862.679 177.435 864.62 180.848 867.137 183.664C869.697 186.437 872.769 188.571 876.353 190.064C879.98 191.557 884.055 192.304 888.577 192.304C893.1 192.304 897.153 191.557 900.737 190.064C904.364 188.571 907.436 186.437 909.953 183.664C912.471 180.848 914.412 177.435 915.777 173.424C917.143 
            169.371 917.825 164.805 917.825 159.728ZM532.502 345.792V360H478.294V267.456H495.51V345.792H532.502ZM593.69 325.056L582.426 294.272C581.872 292.907 581.296 291.285 580.698 289.408C580.101 287.531 579.504 285.504 578.906 283.328C578.352 285.504 577.776 287.552 577.178 289.472C576.581 291.349 576.005 292.992 575.45 294.4L564.25 325.056H593.69ZM624.09 360H610.778C609.285 360 608.069 359.637 607.13 358.912C606.192 358.144 605.488 357.205 605.018 356.096L598.106 337.216H559.77L552.858 356.096C552.517 357.077 551.856 357.973 550.874 358.784C549.893 
            359.595 548.677 360 547.226 360H533.786L570.202 267.456H587.738L624.09 360ZM760.896 267.456V360H745.728V300.224C745.728 297.835 745.856 295.253 746.112 292.48L718.144 345.024C716.822 347.541 714.795 348.8 712.064 
            348.8H709.632C706.902 348.8 704.875 347.541 703.552 345.024L675.264 292.288C675.392 293.696 675.499 295.083 675.584 296.448C675.67 297.813 675.712 299.072 675.712 300.224V360H660.544V267.456H673.536C674.304 267.456 674.966 267.477 675.52 267.52C676.075 267.563 676.566 267.669 676.992 267.84C677.462 268.011 677.867 268.288 678.208 268.672C678.592 269.056 678.955 269.568 679.296 270.208L707.008 321.6C707.734 322.965 708.395 324.373 708.992 325.824C709.632 327.275 710.251 328.768 710.848 330.304C711.446 328.725 712.064 327.211 712.704 325.76C713.344 
            324.267 714.027 322.837 714.752 321.472L742.08 270.208C742.422 269.568 742.784 269.056 743.168 268.672C743.552 268.288 743.958 268.011 744.384 267.84C744.854 267.669 745.366 267.563 745.92 267.52C746.475 267.477 747.136 267.456 747.904 267.456H760.896ZM830.44 325.056L819.176 294.272C818.622 292.907 818.046 291.285 817.448 289.408C816.851 287.531 816.254 285.504 815.656 283.328C815.102 285.504 814.526 287.552 813.928 289.472C813.331 291.349 812.755 292.992 812.2 294.4L801 325.056H830.44ZM860.84 360H847.528C846.035 360 844.819 359.637 843.88 358.912C842.942 
            358.144 842.238 357.205 841.768 356.096L834.856 337.216H796.52L789.608 356.096C789.267 357.077 788.606 357.973 787.624 358.784C786.643 359.595 785.427 360 783.976 360H770.536L806.952 267.456H824.488L860.84 
            360ZM898.387 311.488C901.63 311.488 904.446 311.083 906.835 310.272C909.267 309.461 911.251 308.352 912.787 306.944C914.366 305.493 915.539 303.787 916.307 301.824C917.075 299.861 917.459 297.707 917.459 295.36C917.459 290.667 915.902 287.061 912.787 284.544C909.715 282.027 905.001 280.768 898.643 280.768H887.635V311.488H898.387ZM942.675 360H927.123C924.179 360 922.046 358.848 920.723 356.544L901.267 326.912C900.542 325.803 899.731 325.013 898.835 324.544C897.982 324.075 896.702 323.84 894.995 323.84H887.635V360H870.419V267.456H898.643C904.915 267.456 910.291 
            268.117 914.771 269.44C919.294 270.72 922.985 272.533 925.843 274.88C928.745 277.227 930.878 280.043 932.243 283.328C933.609 286.571 934.291 290.155 934.291 294.08C934.291 297.195 933.822 300.139 932.883 302.912C931.987 305.685 930.665 308.203 928.915 310.464C927.209 312.725 925.075 314.709 922.515 316.416C919.998 318.123 917.118 319.467 913.875 320.448C914.985 321.088 916.009 321.856 
            916.947 322.752C917.886 323.605 918.739 324.629 919.507 325.824L942.675 360ZM1001.57 325.056L990.301 294.272C989.747 292.907 989.171 291.285 988.573 289.408C987.976 287.531 987.379 285.504 986.781 283.328C986.227 285.504 985.651 287.552 985.053 289.472C984.456 291.349 983.88 292.992 983.325 294.4L972.125 325.056H1001.57ZM1031.97 360H1018.65C1017.16 360 1015.94 359.637 1015.01 358.912C1014.07 358.144 1013.36 357.205 1012.89 356.096L1005.98 337.216H967.645L960.733 356.096C960.392 357.077 959.731 357.973 958.749 358.784C957.768 359.595 956.552 360 955.101 360H941.661L978.077 
            267.456H995.613L1031.97 360ZM1113.47 267.456L1076.09 360H1060.54L1023.16 267.456H1036.99C1038.48 267.456 1039.69 267.819 1040.63 268.544C1041.57 269.269 1042.28 270.208 1042.75 271.36L1064.57 327.808C1065.29 329.643 1065.98 331.669 1066.62 333.888C1067.3 336.064 1067.94 338.347 1068.54 340.736C1069.05 338.347 1069.6 336.064 1070.2 333.888C1070.8 331.669 1071.46 329.643 1072.19 327.808L1093.88 271.36C1094.22 270.379 1094.88 269.483 1095.87 268.672C1096.89 267.861 1098.13 267.456 1099.58 267.456H1113.47ZM1140.32 360H1123.04V267.456H1140.32V360ZM1215.25 345.792V360H1161.04V267.456H1178.26V345.792H1215.25ZM1281.75 345.792V360H1227.54V267.456H1244.76V345.792H1281.75ZM1342.94 325.056L1331.68 294.272C1331.12 292.907 1330.55 291.285 1329.95 
            289.408C1329.35 287.531 1328.75 285.504 1328.16 283.328C1327.6 285.504 1327.03 287.552 1326.43 289.472C1325.83 291.349 1325.25 292.992 1324.7 294.4L1313.5 325.056H1342.94ZM1373.34 360H1360.03C1358.53 360 1357.32 359.637 1356.38 358.912C1355.44 358.144 1354.74 357.205 1354.27 356.096L1347.36 337.216H1309.02L1302.11 356.096C1301.77 
            357.077 1301.11 357.973 1300.12 358.784C1299.14 359.595 1297.93 360 1296.48 360H1283.04L1319.45 267.456H1336.99L1373.34 360Z" fill="black"/>
            </svg>
            
            <div className='flex justify-center'>
              {props.showSearch !== false ? (
                <input
                  type="text"
                  placeholder="Buscar"
                  value={props.search}
                  onChange={(e) => props.setSearch(e.target.value)}
                  className={` w-[140px] sm:w-[200px] md:w-[300px] lg:w-[400px] xl:w-[558px] h-9 pl-4 pb-1 
                  placeholder:font-medium placeholder:font-Lato placeholder:text-base placeholder:text-gray1
                  border border-gray2
                  rounded-2xl 
                  focus:outline-none focus:ring-2 focus:border-0 focus:ring-blue-500`}
                />
              ) : (
                <></>
              )}
            </div>
          
          <div className="flex space-x-4">
            <div className="flex flex-col w-auto ">
              <h2 className="text-base">{getUsernameAuth()}</h2>
              <h3 className="text-sm">{getRoleAuth() === "admin" ? "Administrador" : "Empleado"}</h3>
            </div>

            <button className={`rounded-full w-13 h-12 border  group active:outline-hidden
            flex justify-center items-center  transition duration-300 ease-in-out hover:scale-110  ${optionsMenu ? " bg-blue-500 border-blue-500 0":" hover:bg-gray2 bg-white border-gray2" }` }
            onClick={() => (setOptionsMenu(!optionsMenu))}
            >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                className={`size-5  ${optionsMenu ? "fill-white" : "fill-gray1"}`}>
                  <path d="M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 
                  0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 
                  0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 
                  0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z" />
              </svg>
            </button>
                 </div>
          </div>

          {optionsMenu && 
          <div className="size-full fixed z-100"
          onClick={()=>(setOptionsMenu(!optionsMenu))}
          >
          <div className="bg-white absolute flex flex-col mt-[98px] right-0 mr-4 h-auto w-52 p-1 rounded-[4px] shadow-md text-gray1 z-110">
            <Link to="/profiles" className={`text-left px-4 font-lato text-base font-medium w-full py-4 hover:bg-gray3 hover:underline ${getRoleAuth() === "admin" ? "block": "hidden"}`}>Administración Perfiles</Link>
            <button className="text-left px-4 font-lato text-base font-medium w-full py-4 hover:bg-gray3 hover:underline">Configuración</button>
            <div className="flex-col flex">
              <div className="px-2 h-0.5 w-full bg-gray2"></div>
              <Link to="/" onClick={()=>{sessionStorage.clear()}} className="text-left px-4 w-full py-4 font-medium hover:bg-gray3 hover:underline">Cerrar Sesión</Link>
            </div>
          </div>
          </div>
          }
      </div>
  );
};

